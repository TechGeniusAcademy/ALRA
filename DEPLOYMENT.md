# üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é ALRA Eco Village –Ω–∞ Ubuntu

## üìã –ü–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

–ü—Ä–æ–µ–∫—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω –∫ –¥–µ–ø–ª–æ—é —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è–º–∏:

- ‚úÖ `ecosystem.config.js` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è PM2 –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è Node.js –ø—Ä–æ—Ü–µ—Å—Å–æ–º
- ‚úÖ `nginx.conf` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Nginx –¥–ª—è –ø—Ä–æ–∫—Å–∏ –∏ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤
- ‚úÖ `setup-server.sh` - —Å–∫—Ä–∏–ø—Ç –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞
- ‚úÖ `deploy.sh` - —Å–∫—Ä–∏–ø—Ç –¥–µ–ø–ª–æ—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- ‚úÖ `.env.production` - production –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚úÖ `mysql-setup.sql` - SQL –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

## üîß –î–∞–Ω–Ω—ã–µ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É

```
IP: 89.104.74.76
–õ–æ–≥–∏–Ω: root
–ü–∞—Ä–æ–ª—å: yvaAaDiBKCQ8ybN4
```

## üìù –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é

### –®–∞–≥ 1: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É

**–ò–∑ Windows (PowerShell –∏–ª–∏ CMD):**
```powershell
ssh root@89.104.74.76
# –í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å: yvaAaDiBKCQ8ybN4
```

**–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ PuTTY:**
- Host: 89.104.74.76
- Port: 22
- Username: root
- Password: yvaAaDiBKCQ8ybN4

### –®–∞–≥ 2: –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä

**–í–∞—Ä–∏–∞–Ω—Ç A: –ß–µ—Ä–µ–∑ SCP (–∏–∑ –≤–∞—à–µ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞)**

```powershell
# –°–æ–∑–¥–∞–π—Ç–µ –∞—Ä—Ö–∏–≤ –ø—Ä–æ–µ–∫—Ç–∞ (–≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞)
cd "c:\Users\alkaw\OneDrive\Desktop\Alra"
Compress-Archive -Path * -DestinationPath alra.zip

# –ó–∞–≥—Ä—É–∑–∏—Ç–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
scp alra.zip root@89.104.74.76:/root/

# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É –∏ —Ä–∞—Å–ø–∞–∫—É–π—Ç–µ
ssh root@89.104.74.76
cd /root
apt install unzip -y
unzip alra.zip -d alra
```

**–í–∞—Ä–∏–∞–Ω—Ç B: –ß–µ—Ä–µ–∑ Git (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**

–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
```bash
cd /root
git clone <URL_–í–ê–®–ï–ì–û_–†–ï–ü–û–ó–ò–¢–û–†–ò–Ø> alra
cd alra
```

**–í–∞—Ä–∏–∞–Ω—Ç C: –ß–µ—Ä–µ–∑ FileZilla –∏–ª–∏ WinSCP**
- Host: 89.104.74.76
- Port: 22
- Protocol: SFTP
- Username: root
- Password: yvaAaDiBKCQ8ybN4
- –ó–∞–≥—Ä—É–∑–∏—Ç–µ –≤—Å–µ —Ñ–∞–π–ª—ã –≤ `/root/alra`

### –®–∞–≥ 3: –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

```bash
cd /root/alra

# –°–¥–µ–ª–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç—ã –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º–∏
chmod +x setup-server.sh deploy.sh

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫—É —Å–µ—Ä–≤–µ—Ä–∞
./setup-server.sh
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç —É—Å—Ç–∞–Ω–æ–≤–∏—Ç:
- Node.js 20.x
- MySQL Server
- Nginx
- PM2
- Git

### –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ MySQL

```bash
# –í–æ–π–¥–∏—Ç–µ –≤ MySQL
sudo mysql

# –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—ã –∏–∑ mysql-setup.sql:
CREATE DATABASE IF NOT EXISTS alra_eco_village;
CREATE USER IF NOT EXISTS 'alra_user'@'localhost' IDENTIFIED BY 'VashSecurePassword123!';
GRANT ALL PRIVILEGES ON alra_eco_village.* TO 'alra_user'@'localhost';
FLUSH PRIVILEGES;
EXIT;
```

### –®–∞–≥ 5: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª `.env.production` –≤ –ø–∞–ø–∫–µ `server`:

```bash
cd /root/alra
nano server/.env.production
```

–û–±–Ω–æ–≤–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è:
```env
DB_USER=alra_user
DB_PASSWORD=VashSecurePassword123!  # –ü–∞—Ä–æ–ª—å –∏–∑ Step 4
DB_NAME=alra_eco_village
```

–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ñ–∞–π–ª: `Ctrl+X`, –∑–∞—Ç–µ–º `Y`, –∑–∞—Ç–µ–º `Enter`

### –®–∞–≥ 6: –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç –≤ —Ä–∞–±–æ—á—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é

```bash
# –°–æ–∑–¥–∞–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
sudo mkdir -p /var/www/alra

# –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç–µ —Ñ–∞–π–ª—ã
sudo cp -r /root/alra/* /var/www/alra/

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∞–≤–∞
sudo chown -R $USER:$USER /var/www/alra

# –°–æ–∑–¥–∞–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –ª–æ–≥–æ–≤
mkdir -p /var/www/alra/logs
```

### –®–∞–≥ 7: –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ deploy.sh

```bash
nano /var/www/alra/deploy.sh
```

–ò–∑–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª—å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Ç–æ—Ç –∂–µ, —á—Ç–æ –≤ Step 4:
```bash
DB_PASSWORD="VashSecurePassword123!"  # –¢–æ—Ç –∂–µ –ø–∞—Ä–æ–ª—å
```

–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ: `Ctrl+X`, `Y`, `Enter`

### –®–∞–≥ 8: –ó–∞–ø—É—Å—Ç–∏—Ç–µ –¥–µ–ø–ª–æ–π

```bash
cd /var/www/alra
./deploy.sh
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç:
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞
- –°–æ–±–µ—Ä–µ—Ç React –∫–ª–∏–µ–Ω—Ç
- –ù–∞—Å—Ç—Ä–æ–∏—Ç Nginx
- –ó–∞–ø—É—Å—Ç–∏—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —á–µ—Ä–µ–∑ PM2

### –®–∞–≥ 9: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
```
http://89.104.74.76
```

–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É ALRA Eco Village!

## üîç –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º (PM2)

```bash
pm2 status              # –°—Ç–∞—Ç—É—Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
pm2 logs                # –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
pm2 logs --lines 100    # –ü–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å—Ç—Ä–æ–∫ –ª–æ–≥–æ–≤
pm2 restart alra-backend # –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
pm2 stop alra-backend   # –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
pm2 start alra-backend  # –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
pm2 monit               # –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Nginx

```bash
sudo systemctl status nginx   # –°—Ç–∞—Ç—É—Å Nginx
sudo systemctl restart nginx  # –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ Nginx
sudo systemctl stop nginx     # –û—Å—Ç–∞–Ω–æ–≤–∫–∞ Nginx
sudo systemctl start nginx    # –ó–∞–ø—É—Å–∫ Nginx
sudo nginx -t                 # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
# –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
tail -f /var/www/alra/logs/out.log
tail -f /var/www/alra/logs/err.log

# –õ–æ–≥–∏ Nginx
sudo tail -f /var/log/nginx/access.log
sudo tail -f /var/log/nginx/error.log
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ MySQL

```bash
sudo mysql -u alra_user -p alra_eco_village
# –í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

# –í MySQL:
SHOW TABLES;
SELECT * FROM administrators;
EXIT;
```

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–ö–æ–≥–¥–∞ –≤–∞–º –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥:

```bash
cd /var/www/alra

# –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Git:
git pull origin main

# –û–±–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
cd server
npm install --production

# –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –∫–ª–∏–µ–Ω—Ç
cd ../client
npm run build

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
pm2 restart alra-backend
```

## üõ†Ô∏è –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
pm2 logs alra-backend --lines 50

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å
pm2 status

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ
pm2 restart alra-backend
```

### –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ MySQL –∑–∞–ø—É—â–µ–Ω
sudo systemctl status mysql

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ credentials –≤ .env
cat /var/www/alra/server/.env

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
sudo mysql -e "SHOW GRANTS FOR 'alra_user'@'localhost';"
```

### Nginx –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å
sudo systemctl status nginx

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
sudo nginx -t

# –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –æ—à–∏–±–æ–∫
sudo tail -f /var/log/nginx/error.log
```

### –ü–æ—Ä—Ç—ã –∑–∞–Ω—è—Ç—ã

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –∫–∞–∫–∏–µ –ø–æ—Ä—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è
sudo netstat -tulpn | grep :80
sudo netstat -tulpn | grep :5001

# –ï—Å–ª–∏ –ø–æ—Ä—Ç 5001 –∑–∞–Ω—è—Ç, –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å
sudo kill -9 <PID>
```

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSL (HTTPS) —Å Let's Encrypt

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Certbot
sudo apt install certbot python3-certbot-nginx -y

# –ü–æ–ª—É—á–∏—Ç–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à –¥–æ–º–µ–Ω)
sudo certbot --nginx -d yourdomain.com -d www.yourdomain.com

# –ê–≤—Ç–æ–ø—Ä–æ–¥–ª–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
sudo certbot renew --dry-run
```

### –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–≤–º–µ—Å—Ç–æ root)

```bash
# –°–æ–∑–¥–∞–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
adduser alra
usermod -aG sudo alra

# –í–æ–π–¥–∏—Ç–µ –ø–æ–¥ –Ω–æ–≤—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
su - alra

# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –¥–µ–ø–ª–æ—è –≤ –±—É–¥—É—â–µ–º
```

### –ù–∞—Å—Ç—Ä–æ–π—Ç–µ firewall

```bash
sudo ufw status
sudo ufw allow OpenSSH
sudo ufw allow 'Nginx Full'
sudo ufw enable
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ PM2

```bash
pm2 install pm2-logrotate  # –†–æ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤
pm2 set pm2-logrotate:max_size 10M
pm2 set pm2-logrotate:retain 7
```

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –≤–∞—à —Å–∞–π—Ç –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É:
- **Frontend**: http://89.104.74.76
- **Backend API**: http://89.104.74.76/api

–î–ª—è –ø–∞–Ω–µ–ª–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –ø–µ—Ä–µ–π–¥–∏—Ç–µ:
- **Admin Panel**: http://89.104.74.76/admin

---

**–£—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è! üéâ**
